<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Class: TweetModel</title>

  <link rel="stylesheet" href="./rdoc.css" type="text/css" media="screen" />

  <script src="./js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="./lib/tweet_model_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/tweet_model.rb">lib/tweet_model.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link"><a href="Object.html">Object</a></p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-i-get_tweets_for_tag">#get_tweets_for_tag</a></li>
          
          <li><a href="#method-i-get_tweets_for_user">#get_tweets_for_user</a></li>
          
          <li><a href="#method-i-get_tweets_from_followers">#get_tweets_from_followers</a></li>
          
          <li><a href="#method-i-save_tweet">#save_tweet</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="./images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="./Object.html">Object</a></li>
        
          <li><a href="./Tweet.html">Tweet</a></li>
        
          <li><a href="./TweetModel.html">TweetModel</a></li>
        
          <li><a href="./TwitterClone.html">TwitterClone</a></li>
        
          <li><a href="./User.html">User</a></li>
        
          <li><a href="./UserModel.html">UserModel</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">TweetModel</h1>

    <div id="description" class="description">
      
<p>Model class for saving and loading tweets to a mongo database.</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(connection, collection_name)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Creates a new <a href="TweetModel.html">TweetModel</a> object.</p>

<h3>ARGS:</h3>
<ul><li>
<p>connection should be a Mongo database connection.</p>
</li><li>
<p>collection_name should be the name of a collection within the database.</p>
</li></ul>
            

            
            <div class="method-source-code" id="new-source">
<pre>
<span class="ruby-comment"># File lib/tweet_model.rb, line 14</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">connection</span>, <span class="ruby-identifier">collection_name</span>)
  <span class="ruby-ivar">@connection</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">collection</span>(<span class="ruby-identifier">collection_name</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="get_tweets_for_tag-method" class="method-detail ">
          <a name="method-i-get_tweets_for_tag"></a>

          
          <div class="method-heading">
            <span class="method-name">get_tweets_for_tag</span><span
              class="method-args">(tag, limit = 50)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns a collection of tweets which have the specified tag as an array.
The tweets are stored in the array in descending order by timestamp, so the
most recent tweets will be first in the array.</p>

<h3>ARGS:</h3>
<ul><li>
<p>tag should be a string tag you want to search for.</p>
</li><li>
<p>limit should be the maximum number of tweets you want returned.</p>
</li></ul>

<p>The default limit is 50.</p>
            

            
            <div class="method-source-code" id="get_tweets_for_tag-source">
<pre>
<span class="ruby-comment"># File lib/tweet_model.rb, line 56</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_tweets_for_tag</span>(<span class="ruby-identifier">tag</span>, <span class="ruby-identifier">limit</span> = <span class="ruby-value">50</span>)
  <span class="ruby-identifier">result_set</span> = <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-string">&quot;tags&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tag</span>).<span class="ruby-identifier">sort</span>([[<span class="ruby-string">&quot;timestamp&quot;</span>, <span class="ruby-value">-1</span>]]).<span class="ruby-identifier">limit</span>(<span class="ruby-identifier">limit</span>)
  <span class="ruby-identifier">tweets</span> = []

  <span class="ruby-identifier">result_set</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">result</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">tweets</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Tweet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">result</span>[<span class="ruby-string">&quot;text&quot;</span>], <span class="ruby-identifier">result</span>[<span class="ruby-string">&quot;user&quot;</span>], <span class="ruby-identifier">result</span>[<span class="ruby-string">&quot;timestamp&quot;</span>], <span class="ruby-identifier">result</span>[<span class="ruby-string">&quot;tags&quot;</span>])
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">tweets</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- get_tweets_for_tag-source -->
            
          </div>

          

          
        </div><!-- get_tweets_for_tag-method -->

      
        <div id="get_tweets_for_user-method" class="method-detail ">
          <a name="method-i-get_tweets_for_user"></a>

          
          <div class="method-heading">
            <span class="method-name">get_tweets_for_user</span><span
              class="method-args">(user, limit = 50)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns a collection of tweets created by a given user as an array. The
tweets are stored in the array in descending order by timestamp, so the
most recent tweets will be first in the array.</p>

<h3>ARGS:</h3>
<ul><li>
<p>user should be a <a href="User.html">User</a> object for which to find
tweets or a String</p>
</li></ul>

<p>username.</p>
<ul><li>
<p>limit should be the maximum number of tweets you want returned.</p>
</li></ul>

<p>The default limit is 50.</p>
            

            
            <div class="method-source-code" id="get_tweets_for_user-source">
<pre>
<span class="ruby-comment"># File lib/tweet_model.rb, line 38</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_tweets_for_user</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">limit</span> = <span class="ruby-value">50</span>)
  <span class="ruby-identifier">result_set</span> = <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-string">&quot;user&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">User</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">handle</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">user</span>).<span class="ruby-identifier">sort</span>([[<span class="ruby-string">&quot;timestamp&quot;</span>, <span class="ruby-value">-1</span>]]).<span class="ruby-identifier">limit</span>(<span class="ruby-identifier">limit</span>)
  <span class="ruby-identifier">tweets</span> = []

  <span class="ruby-identifier">result_set</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">result</span><span class="ruby-operator">|</span> <span class="ruby-identifier">tweets</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Tweet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">result</span>[<span class="ruby-string">&quot;text&quot;</span>], <span class="ruby-identifier">user</span>, <span class="ruby-identifier">result</span>[<span class="ruby-string">&quot;timestamp&quot;</span>], <span class="ruby-identifier">result</span>[<span class="ruby-string">&quot;tags&quot;</span>])}
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">tweets</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- get_tweets_for_user-source -->
            
          </div>

          

          
        </div><!-- get_tweets_for_user-method -->

      
        <div id="get_tweets_from_followers-method" class="method-detail ">
          <a name="method-i-get_tweets_from_followers"></a>

          
          <div class="method-heading">
            <span class="method-name">get_tweets_from_followers</span><span
              class="method-args">(user, limit = 50)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Get up to limit  tweets from all of a user’s followers sorted by most
recent tweets.</p>

<h3>ARGS:</h3>
<ul><li>
<p><a href="User.html">User</a> should be the <a href="User.html">User</a>
object from whose followers you want tweets.</p>
</li><li>
<p>limit should be the maximum number of tweets you want returned.</p>
</li></ul>

<p>The default limit is 50.</p>
            

            
            <div class="method-source-code" id="get_tweets_from_followers-source">
<pre>
<span class="ruby-comment"># File lib/tweet_model.rb, line 75</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_tweets_from_followers</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">limit</span> = <span class="ruby-value">50</span>)
  <span class="ruby-identifier">tweets</span> = []
  <span class="ruby-identifier">user</span>.<span class="ruby-identifier">following</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">followed</span><span class="ruby-operator">|</span> <span class="ruby-identifier">tweets</span> = <span class="ruby-identifier">tweets</span> <span class="ruby-operator">+</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">get_tweets_for_user</span>(<span class="ruby-identifier">followed</span>)}
  <span class="ruby-identifier">tweets</span>.<span class="ruby-identifier">sort!</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">t1</span>, <span class="ruby-identifier">t2</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t2</span>.<span class="ruby-identifier">timestamp</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">t1</span>.<span class="ruby-identifier">timestamp</span>}
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">tweets</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">limit</span>]
<span class="ruby-keyword">end</span></pre>
            </div><!-- get_tweets_from_followers-source -->
            
          </div>

          

          
        </div><!-- get_tweets_from_followers-method -->

      
        <div id="save_tweet-method" class="method-detail ">
          <a name="method-i-save_tweet"></a>

          
          <div class="method-heading">
            <span class="method-name">save_tweet</span><span
              class="method-args">(tweet)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Saves a <a href="Tweet.html">Tweet</a> object to the database.</p>

<h3>ARGS:</h3>
<ul><li>
<p>tweet should be a tweet object to be saved.</p>
</li></ul>
            

            
            <div class="method-source-code" id="save_tweet-source">
<pre>
<span class="ruby-comment"># File lib/tweet_model.rb, line 23</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">save_tweet</span>(<span class="ruby-identifier">tweet</span>)
  <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">insert</span>(<span class="ruby-string">&quot;text&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tweet</span>.<span class="ruby-identifier">text</span>, <span class="ruby-string">&quot;user&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tweet</span>.<span class="ruby-identifier">user</span>, <span class="ruby-string">&quot;timestamp&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tweet</span>.<span class="ruby-identifier">timestamp</span>.<span class="ruby-identifier">to_i</span>, <span class="ruby-string">&quot;tags&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tweet</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">to_a</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- save_tweet-source -->
            
          </div>

          

          
        </div><!-- save_tweet-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

